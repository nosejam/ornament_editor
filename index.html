<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ornament Designer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            background-color: #f5f5f5;
            font-family: monospace;
        }
        #editor-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }
        #code-editor {
            height: 75vh;
            width: 100%;
            border: 2px solid #333;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .CodeMirror {
            height: 100%;
            font-size: 14px;
            border-radius: 5px;
        }
        #update-btn {
            margin-top: 10px;
            padding: 12px 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }
        #update-btn:hover {
            background-color: #45a049;
        }
        #examples-section {
            margin-top: 20px;
        }
        #examples-section h3 {
            margin-bottom: 10px;
        }
        .example-btn {
            margin: 5px 5px 5px 0;
            padding: 10px 20px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
        }
        .example-btn:hover {
            background-color: #0b7dda;
        }
        #canvas-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }
        #canvas-container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }
        #background-canvas {
            display: block;
            max-width: 90vw;
            max-height: 70vh;
            width: auto;
            height: auto;
        }
        #ornament-canvas {
            position: absolute;
            top: 0;
            left: 0;
            max-width: 90vw;
            max-height: 70vh;
            width: auto;
            height: auto;
        }
        #action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
            margin-top: 20px;
        }
        .action-btn {
            padding: 10px 20px;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
        }
        .action-btn:hover {
            background-color: #e68900;
        }
        #instructions-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #9C27B0;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            z-index: 100;
        }
        #instructions-btn:hover {
            background-color: #7B1FA2;
        }
        #instructions-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        #instructions-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        #instructions-content h2 {
            margin-top: 0;
            color: #333;
        }
        #instructions-content h3 {
            color: #555;
            margin-top: 20px;
        }
        #instructions-content code {
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        #instructions-content pre {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        #close-instructions {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #999;
            cursor: pointer;
            border: none;
            background: none;
        }
        #close-instructions:hover {
            color: #333;
        }
        .coord-info {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        /* Mobile responsive layout */
        @media (max-width: 1000px) {
            body {
                flex-direction: column;
            }
            #editor-panel {
                width: 100%;
            }
            #canvas-panel {
                width: 100%;
                padding-bottom: 20px;
            }
            #canvas-container {
                margin: 20px auto;
            }
            #action-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <button id="instructions-btn">Instructions</button>
    
    <div id="instructions-modal">
        <div id="instructions-content">
            <button id="close-instructions">&times;</button>
            <h2>üé® Ornament Drawing Instructions</h2>
            
            <div class="coord-info">
                <h3>üìç Coordinate System</h3>
                <ul>
                    <li><strong>Center:</strong> (0, 0) is the center of the ornament</li>
                    <li><strong>Horizontal:</strong> Negative is LEFT, Positive is RIGHT</li>
                    <li><strong>Vertical:</strong> Negative is UP, Positive is DOWN</li>
                    <li><strong>Circle size:</strong> Radius is <code>242</code> pixels (diameter is <code>484</code> pixels)</li>
                </ul>
            </div>
            
            <h3>üéØ Drawing Commands</h3>
            
            <h4>Drawing Circles (arc)</h4>
            <pre><code>ctx.beginPath();
ctx.arc(x, y, radius, startAngle, endAngle);
ctx.fill();  // or ctx.stroke();</code></pre>
            <p><strong>Example:</strong> Circle at center with radius 50</p>
            <pre><code>ctx.beginPath();
ctx.arc(0, 0, 50, 0, Math.PI * 2);
ctx.fillStyle = '#ff0000';
ctx.fill();</code></pre>
            
            <h4>Drawing Rectangles (rect)</h4>
            <pre><code>ctx.beginPath();
ctx.rect(x, y, width, height);
ctx.fill();  // or ctx.stroke();</code></pre>
            <p><strong>Example:</strong> 100x100 rectangle centered at origin</p>
            <pre><code>ctx.beginPath();
ctx.rect(-50, -50, 100, 100);
ctx.fillStyle = '#00ff00';
ctx.fill();</code></pre>
            
            <h4>Drawing Lines (moveTo & lineTo)</h4>
            <pre><code>ctx.beginPath();
ctx.moveTo(x1, y1);  // Move to starting point
ctx.lineTo(x2, y2);  // Draw line to this point
ctx.lineTo(x3, y3);  // Continue drawing
ctx.stroke();</code></pre>
            <p><strong>Example:</strong> Draw a triangle</p>
            <pre><code>ctx.beginPath();
ctx.moveTo(0, -50);
ctx.lineTo(-50, 50);
ctx.lineTo(50, 50);
ctx.closePath();
ctx.fillStyle = '#0000ff';
ctx.fill();</code></pre>
            
            <h4>Colors</h4>
            <pre><code>ctx.fillStyle = '#ff0000';   // Red fill
ctx.strokeStyle = '#0000ff'; // Blue outline
ctx.lineWidth = 5;           // Line thickness</code></pre>
            
            <h4>Gradients</h4>
            <pre><code>// Linear gradient
const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
gradient.addColorStop(0, '#ff0000');
gradient.addColorStop(1, '#0000ff');
ctx.fillStyle = gradient;

// Radial gradient
const gradient = ctx.createRadialGradient(x1, y1, r1, x2, y2, r2);
gradient.addColorStop(0, '#ffffff');
gradient.addColorStop(1, '#000000');
ctx.fillStyle = gradient;</code></pre>
            
            <h3>üí° Tips</h3>
            <ul>
                <li>Always use <code>ctx.beginPath()</code> before starting a new shape</li>
                <li>Use <code>ctx.fill()</code> to fill a shape with color</li>
                <li>Use <code>ctx.stroke()</code> to draw just the outline</li>
                <li>Set colors BEFORE calling fill() or stroke()</li>
                <li>Angles are in radians: <code>Math.PI * 2</code> = full circle, <code>Math.PI</code> = half circle</li>
                <li>Press <strong>Ctrl+Enter</strong> to quickly update your ornament</li>
            </ul>
        </div>
    </div>
    
    <div id="editor-panel">
        <h2>Edit Ornament Design</h2>
        <div id="code-editor"></div>
        <button id="update-btn">Update Ornament</button>
        
        <div id="examples-section">
            <h3>Load Example:</h3>
            <button class="example-btn" data-example="smiley">Smiley Face</button>
            <button class="example-btn" data-example="star">Star</button>
            <button class="example-btn" data-example="snowman">Snowman</button>
            <button class="example-btn" data-example="gradient">Red Gradient</button>
            <button class="example-btn" data-example="star-gradient">Star Gradient</button>
            <button class="example-btn" data-example="wildcat-svg">Wildcat SVG</button>
            
        </div>
    </div>
    
    <div id="canvas-panel">
        <div id="canvas-container">
            <canvas id="background-canvas"></canvas>
            <canvas id="ornament-canvas"></canvas>
        </div>
        <div id="action-buttons">
            <button class="action-btn" id="download-code-btn">Download Code</button>
            <button class="action-btn" id="download-btn">Download Image</button>
            <button class="action-btn" id="print-btn">Print Image</button>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script>
        window.addEventListener('load', function() {
            const bgCanvas = document.getElementById('background-canvas');
            const bgCtx = bgCanvas.getContext('2d');
            const ornamentCanvas = document.getElementById('ornament-canvas');
            const ornamentCtx = ornamentCanvas.getContext('2d');
            const updateBtn = document.getElementById('update-btn');
            
            // Initialize CodeMirror editor
            const editor = CodeMirror(document.getElementById('code-editor'), {
                mode: 'javascript',
                theme: 'monokai',
                lineNumbers: true,
                lineWrapping: true,
                indentUnit: 4,
                tabSize: 4,
                indentWithTabs: false,
                matchBrackets: true,
                autoCloseBrackets: true
            });
            
            // Set canvas size to fixed 500px (will be scaled with CSS)
            const circleSize = 500;
            bgCanvas.width = circleSize;
            bgCanvas.height = 1.5 * circleSize;
            ornamentCanvas.width = circleSize;
            ornamentCanvas.height = 1.5 * circleSize;
            
            const centerX = circleSize / 2;
            const centerY = circleSize * 0.75;
            const radius = circleSize / 2 - 8;
            
            // ============================================================
            // EXAMPLES SECTION - Easy to add/remove/edit examples
            // ============================================================
            // Note: Coordinates are relative to center (0,0)
            // Positive X is right, Positive Y is down
            // radius = 242 (size of the ornament circle)
            
            const examples = {
                'Smiley Face': `// Draw yellow background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#ffff00';
ctx.fill();

// Left eye
ctx.beginPath();
ctx.arc(-70, -60, 10, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Right eye
ctx.beginPath();
ctx.arc(70, -60, 10, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Smile
ctx.beginPath();
ctx.arc(0, -20, 170, Math.PI/6, 5*Math.PI/6);
ctx.strokeStyle = '#000000';
ctx.lineWidth = 8;
ctx.stroke();`,

                'Star': `// Draw dark blue background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#000080';
ctx.fill();

// Draw yellow five-pointed star
ctx.beginPath();
const starRadius = 125;
for (let i = 0; i < 5; i++) {
    const angle = (i * 4 * Math.PI) / 5 - Math.PI / 2;
    const x = Math.cos(angle) * starRadius;
    const y = Math.sin(angle) * starRadius;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
}
ctx.closePath();
ctx.fillStyle = '#ffff00';
ctx.fill();`,

                'Snowman': `// Draw light blue background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#87ceeb';
ctx.fill();

// Ground
ctx.beginPath();
ctx.rect(-300, 50, 600, 300);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Bottom circle (largest)
ctx.beginPath();
ctx.arc(0, 75, 60, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Middle circle
ctx.beginPath();
ctx.arc(0, -25, 50, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Top circle (head)
ctx.beginPath();
ctx.arc(0, -105, 40, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Eyes
ctx.beginPath();
ctx.arc(-15, -115, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(15, -115, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Smile
ctx.beginPath();
ctx.arc(0, -100, 20, 0, Math.PI);
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Buttons on middle circle
ctx.beginPath();
ctx.arc(0, -41.67, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(0, -25, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(0, -8.33, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();`,

                'Red Gradient': `// Create radial gradient from top-right to center
const gradient = ctx.createRadialGradient(
    100, -100, 20,   // Start: top-right, small radius
    0, 0, 300        // End: center, large radius
);

// Add color stops
gradient.addColorStop(0, '#ffffff');  // White at top-right
gradient.addColorStop(1, '#8b0000');  // Dark red at edges

// Fill the ornament circle with gradient
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();`,
                'Star Gradient': `// Draw dark blue ornament background
const gradient = ctx.createRadialGradient(
    100, - 100, 20,
    0, 0, 300
);
gradient.addColorStop(0, '#ffffff');
gradient.addColorStop(.5, '#000080');

ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();

// Create gradient for star
const gradient2 = ctx.createRadialGradient(
    100, -100, 20,    // Start (relative to star center)
    0, 0, 300       // End (also relative)
);

gradient2.addColorStop(0,   "#ffffff"); // central sparkle
gradient2.addColorStop(0.1,"#fff2b0"); // light highlight
gradient2.addColorStop(0.25,"#ffd45e"); // bright gold
gradient2.addColorStop(.4,   "#8a5c00"); // dark reflective shadow

ctx.beginPath();
const starRadius = 125;
for (let i = 0; i < 5; i++) {
    const angle = (i * 4 * Math.PI) / 5 - Math.PI / 2;
    ctx.lineTo(Math.cos(angle) * starRadius, Math.sin(angle) * starRadius);
}
ctx.closePath();

ctx.fillStyle = gradient2;
ctx.fill();

ctx.restore();`,

                'Wildcat SVG': `// This example draws a complicated SVG path.  An SVG path can be extracted from a
// .svg file downloaded from the internet.  You can generate your own svg from a .jpg 
// or .png using an application like inkscape and the "path - trace bitmap" tool.

// Paste your SVG path here
const svgPathData1 = "m 273.5,478.32323 c -14.81332,-4.62205 -54.08382,0.48533 -54.77686,-12.40926 21.84034,-12.78351 -6.1646,-17.51887 -15.94331,-27.87425 -11.4729,-13.4747 -47.69027,-36.75835 -20.69101,-46.41944 28.44178,-8.09765 -7.94044,-25.0456 -18.05683,-34.26318 C 127.52398,332.93894 76.954878,341.09088 46.280238,371.20674 28.395805,356.92573 27.072418,327.59179 24.329279,305.40413 21.842006,278.87455 26.184722,251.86001 29.969888,226.11397 20.4209,230.52441 -0.36168974,245.43858 10.499484,223.43344 21.350855,186.81289 39.119107,151.17316 68.06218,125.5 48.700913,125.68593 39.683654,122.57592 57.271681,110.43997 88.064462,82.279096 126.55291,62.683452 167.27167,53.717985 174.93758,39.309428 181.8266,12.136669 197.36555,7.845602 c 25.44036,9.015746 47.64135,24.824182 67.87654,42.375039 47.83807,5.359516 95.69134,18.501784 136.25791,45.127479 24.57964,0.532506 50.41638,-2.170681 72.9815,9.62195 1.72213,17.60294 -9.77255,37.10376 -8.44036,52.59543 13.28037,15.20741 22.90418,41.73888 8.11929,58.9345 4.24214,7.31193 5.94651,18.49133 11.7,23.5 31.66459,-0.63052 63.52657,3.72867 93.63957,13.62957 -11.86622,2.16008 -40.4531,2.23423 -39.96375,8.19343 13.48901,4.21078 47.83163,15.6109 49.95719,20.9651 -18.66448,-0.33045 -37.32896,-0.66088 -55.99344,-0.99132 14.58574,8.84484 29.40932,17.57551 42,29.20378 -28.1518,-5.85569 -56.65572,-10.28229 -85.36299,-12.24781 -3.87282,12.09615 -7.25227,59.51189 -22.9578,40.24512 -9.64952,-14.81018 -32.307,8.48416 -41.1016,16.51826 -3.28099,24.26809 -44.89914,23.57248 -37.95537,44.20736 -7.25512,42.31681 -46.51968,76.99226 -89.74259,78.73391 -8.27665,0.68543 -16.6085,0.56943 -24.87965,-0.13417 z m 23.57822,-26.77889 c 20.27209,-1.54518 50.16953,-20.00781 49.99933,-36.39163 -36.72288,1.52078 -82.49854,-8.93632 -95.35127,-48.45982 -4.83893,-0.40962 1.55975,37.12606 11.82415,45.80711 23.67314,-3.85286 -7.13852,13.37343 -15.94558,15.03791 -17.00977,6.70636 27.93031,14.13865 35.97228,13.1597 -15.60778,19.29059 0.87529,10.71416 13.50109,10.84673 z M 348.28203,397 c 9.76366,1.96212 -0.26205,-29.04884 -5.64587,-9.23235 -11.89642,12.33363 -7.21927,10.02933 5.64587,9.23235 z M 329,395.46788 c -0.22601,-19.24085 -13.15307,8.1092 -14.1736,-11.70426 -10.12776,15.86492 -8.82539,-12.54371 -21.1852,5.5273 10.15072,4.13309 24.73097,9.92598 35.3588,6.17696 z M 289.97887,382.25 c 17.05606,-27.84059 -34.51274,-8.74085 -5.56051,1.92552 1.59562,3.00291 6.01901,1.12379 5.56051,-1.92552 z m 98.7012,-19.40236 c 12.65156,-7.87818 17.2516,-22.27145 -1.43241,-17.84764 2.82504,7.73304 -14.33297,28.48938 1.43241,17.84764 z m -13.83748,-10.55975 c 17.69423,-12.30912 -18.81439,-8.50677 -26.34537,-11.61645 -6.3854,2.97219 -2.06796,21.65164 6.60433,9.41682 -1.77892,16.07988 14.81791,-8.48987 11.18916,7.86105 3.10024,2.41947 6.16557,-4.7916 8.55188,-5.66142 z m -50.04316,1.65447 c 12.47766,-5.54314 21.37684,-18.93054 0.81315,-19.77335 1.73026,5.96338 -18.8813,30.91239 -0.81315,19.77335 z m 92.00529,-29.23967 c 12.93452,0.18798 33.85357,-30.00168 24.80864,-32.92901 -13.51983,15.571 -40.66774,13.94602 -46.61336,35.85079 7.15428,1.18826 14.87554,-1.12378 21.80472,-2.92178 z M 367.5638,321.4504 c 38.23776,-11.22348 -2.01276,-36.76884 -5.15213,-58.23288 13.60254,-11.23577 53.6062,5.04258 62.20407,0.67163 -13.88744,-16.44628 -30.36687,-30.71316 -47.84465,-43.24122 -9.74135,4.14279 -47.48116,16.65604 -45.06411,7.10612 18.76234,-15.41836 -36.00757,3.76649 -6.99593,6.37893 2.90261,18.87145 -34.96397,1.458 -15.7174,16.3652 13.32385,4.14644 -0.63607,25.55952 -10.8095,15.64147 -3.14316,11.32647 17.91758,4.2869 12.89573,18.51114 5.84889,14.18004 -20.83812,-7.11405 -4.15394,13.36968 12.59899,19.46462 38.18499,29.65954 60.63786,23.42993 z M 419.11008,232.75 c 10.09195,-14.86761 4.7059,-12 -4.91032,-4.65071 -10.24487,-13.00697 -15.15168,-5.18631 -2.02992,2.34811 1.9527,0.44037 4.83342,7.83096 6.94024,2.3026 z m -81.52817,-20.70647 c 11.29821,-6.49773 -13.89266,-6.94814 -18.74859,-3.12003 4.54097,-15.76856 -34.75049,-36.93738 -21.35536,-7.92321 7.61094,13.63676 26.56599,17.34632 40.10395,11.04324 z m 108.85735,-78.16089 c 12.89611,-18.94202 -26.69997,1.3361 -6.12564,7.86895 4.2629,2.8709 4.29996,-6.33832 6.12564,-7.86895 z m -201.19855,0.82226 c 4.09129,-13.51898 -12.30723,-35.365124 -18.51643,-50.045516 -6.05495,-5.568233 -21.77909,-44.311544 -25.9857,-23.48921 -4.09643,12.673644 -10.40497,47.541326 -3.74855,50.655216 5.6938,-15.663747 13.01252,-18.590326 15.22249,-1.02275 4.27672,30.37561 14.70996,-25.129484 20.52643,6.14843 4.68649,5.21103 1.51025,23.86828 12.50176,17.75383 z"

const svgPathData2 = "m 269,469.32117 c -19.80136,0.28338 -28.05876,-4.3794 -20.61944,-16.94192 -19.31699,-9.29661 -39.11509,-20.15358 -52.99507,-36.64287 13.22406,0.89258 46.54323,4.35012 25.70232,-15.75322 -25.5288,-41.53875 -72.86406,-74.54279 -123.379172,-66.80521 -18.242169,-1.68213 -38.557383,19.97649 -50.61213,20.14931 -16.50004,-42.76115 -11.668132,-91.17562 0.468607,-134.44639 7.295236,-13.36164 5.659022,-19.13593 -8.017288,-10.12818 -18.232697,8.68223 4.265024,-24.37927 7.76605,-32.23564 13.280948,-22.16098 31.111788,-41.43709 51.779816,-56.82669 -6.728821,-4.13968 -33.620365,-1.48314 -13.11246,-12.65214 C 112.56493,88.812606 142.92025,73.687669 175.24505,70 c 10.27915,-12.043601 11.8869,-49.532517 33.12493,-40.838004 19.08448,10.225932 36.37052,23.510835 52.4594,37.932449 51.11428,2.221922 102.51606,15.226609 144.8473,44.880355 18.42335,-0.98481 37.65921,-1.77327 55.18148,4.55002 -5.43931,23.09218 -12.61744,44.61143 4.30139,64.96949 11.23255,14.66258 -7.43736,29.00126 -7.15471,37.56793 13.15206,16.36542 10.24192,48.80832 39.20025,36.44379 10.73211,-1.26926 31.11577,1.00955 7.99706,3.55075 -8.51634,1.88214 -39.32097,9.15387 -14.44532,8.7711 10.88179,-0.18748 46.08439,5.43764 43.0532,7.99066 -17.65186,0.46023 -37.07637,-0.72141 -53.1388,3.94245 10.47372,0.0601 44.56885,9.92947 41.32877,12.78543 -18.23813,-1.05154 -52.77357,-15.39238 -46.51985,16.10867 -0.88468,12.93515 -3.44421,22.37833 -12.38695,8.9685 -10.4646,-4.45082 -21.36848,21.10778 -35.92253,20.99347 -12.56152,2.0555 -11.51828,18.4152 -20.55981,25.41136 -7.43248,13.09343 -26.42326,11.35273 -35.26108,18.7997 -8.91128,12.56419 8.80463,21.77687 -1.52038,35.54049 C 353.64599,456.68512 308.01283,473.03909 269,469.32117 Z m 36,-18.90404 c 18.09222,-4.91782 38.40666,-17.08199 44.06752,-35.11735 -30.60646,-1.12906 -66.69995,-3.37665 -87.04328,-29.92648 -13.23057,-5.43838 -7.00642,-44.19701 -20.24986,-32.90788 -11.20399,13.18796 -1.44307,-23.67515 3.85255,-27.76714 14.5921,-10.95759 7.53026,-16.16194 -6.95241,-14.01864 0.30125,-6.09656 20.5294,-18.09142 31.10143,-19.54271 13.95223,-2.15575 33.41056,-10.989 37.56876,8.07444 15.7386,23.89836 56.88799,35.69525 76.70307,10.59338 10.01356,-13.74537 -20.08255,-24.84994 -19.78884,-41.71934 0.27688,-17.41841 34.68616,-3.1198 47.96904,-4.6534 30.72946,10.25866 -4.9168,-17.08456 -12.88882,-25.12934 -10.40695,-7.30867 -20.42641,-24.31389 -34.00268,-13.64042 -17.22656,6.57715 -39.03589,8.43342 -32.01951,-2.55133 -27.87578,9.97297 -67.7009,-14.31546 -60.38577,-46.07893 5.24639,-17.68836 -26.14763,-13.66112 -39.17893,-15.42373 3.54678,-9.14224 36.29135,-17.04209 51.05761,-10.53905 11.95735,0.79869 27.8226,12.57246 36.14567,13.52064 -7.84925,-26.58752 20.86685,14.01313 26.68587,19.58542 10.18444,18.02698 42.31025,25.98587 45.56651,-1.15189 10.29991,0.79156 1.75634,32.26904 20.67253,25.38582 12.34207,1.57888 27.58811,-5.11927 31.43904,-17.38172 -3.70472,-25.24727 -26.86232,-41.53557 -45.04607,-57.05711 -15.2699,-11.43027 -35.14113,-24.75814 -51.00312,-29.59804 10.82745,8.3535 31.09417,20.88865 33.22473,31.0694 -33.44488,-18.34181 -68.30041,-34.8406 -105.4036,-44.276702 -7.51884,15.225702 -15.78172,31.637672 -29.05157,42.146442 -10.21994,-28.63892 -22.65084,-58.022228 -44.88233,-79.534722 -6.68012,19.971895 -11.41087,41.32251 -7.99078,62.406142 5.3369,-8.63581 13.45586,-28.808436 15.45403,-8.69225 3.03389,13.19337 6.86161,22.29248 12.03691,5.43024 5.11743,-19.339458 22.50814,25.70821 9.54741,25.83685 -19.93665,2.67297 -44.63172,8.5702 -62.14241,0.22587 -0.37288,-16.34973 -0.006,-32.8047 2.56499,-48.9836 -11.0469,0.843624 -41.11803,9.713897 -41.45709,14.70474 6.42515,1.70718 34.09691,1.29443 22.48361,6.96056 -30.85324,16.15352 -61.405457,35.79825 -82.835863,63.63319 10.86553,-3.58135 34.306923,-16.73738 17.97155,3.39608 C 73.068047,206.30822 61.695892,238.51969 62.076461,271.5 72.4114,233.88787 95.325867,199.88801 127.45836,177.53041 102.77641,217.3308 77.333093,262.4836 82.585073,310.95106 c 17.296067,-3.27667 45.277007,-0.0502 57.193057,-1.75571 -4.20567,-9.79582 -22.52078,-30.1394 0.0367,-17.35249 52.58535,21.7771 93.72833,68.41419 108.41927,123.41088 6.50286,1.28146 31.80157,-6.94692 22.26586,0.37644 -10.17432,9.11682 -44.17325,14.26827 -14.19894,21.78304 5.35576,5.80298 34.90675,-3.04125 23.76231,8.88119 -13.18216,13.33509 19.14873,3.81747 24.93663,4.12272 z M 294,284.41141 c -48.47007,-16.5788 -100.58627,-24.61932 -151.60199,-18.17245 54.7553,-16.25936 113.43092,-7.03186 167.0907,9.26104 5.4551,18.23741 -0.75396,14.57357 -15.48871,8.91141 z m 10,-17.97161 c -53.61297,-21.58322 -111.96487,-28.92381 -169.43559,-29.32931 29.56076,-7.29379 60.89612,-4.45188 91.13327,-3.19992 30.0524,3.57601 60.16756,9.2074 88.97967,18.45512 -4.15106,5.20354 0.0768,22.56652 -10.67735,14.07411 z m 9.85884,-22.45899 c -49.22465,-24.6125 -105.33587,-30.90321 -159.64711,-33.44015 57.20454,-7.16005 116.08058,2.67406 169.51544,23.7385 1.80083,3.2579 -5.4628,13.35886 -9.86833,9.70165 z m 35.14103,153.36922 c 8.56032,-2.81286 -1.44368,-30.01523 -6.60929,-9.7891 -10.84402,11.21875 -7.48138,11.64155 6.60929,9.7891 z M 329,395.14922 c 0.67686,-16.19471 -13.80762,6.4306 -13.45903,-10.547 -9.81275,10.42319 -7.04308,2.45508 -12.92756,-2.36289 -29.57788,9.14038 20.07124,17.22563 26.38659,12.90989 z M 290.36822,381.1844 c 7.19399,-18.01672 -4.5624,-16.22867 -16.19812,-7.59704 2.4334,4.04894 15.65301,21.28844 16.19812,7.59704 z m 29.18231,-12.83908 c -5.00962,-5.41288 -25.02417,1.36819 -12.14506,-14.84532 8.96999,-7.54058 -0.99561,-27.72552 -8.72299,-12.18248 -2.85038,-7.2388 -10.00305,-27.78963 -26.40475,-24.50296 -7.17184,11.99924 -14.40189,43.29905 0.78392,47.27644 11.73045,-4.82864 29.75107,-22.62866 27.92648,2.57721 -0.5017,7.77094 8.63811,5.11476 12.17958,7.68002 5.11249,-2.32774 8.43105,7.97509 6.38282,-6.00291 z m 67.23931,-4.24249 c 11.6632,-5.39934 22.53011,-24.48689 2.52473,-19.10283 -2.18061,0.0471 -11.7595,27.18887 -2.52473,19.10283 z m -12.2835,-10.56658 c 16.58697,-13.94854 -22.13534,-12.60205 -28.39779,-12.18706 -4.52813,14.7258 3.84898,10.80204 8.72444,11.38988 -1.71243,12.96178 15.52607,-9.70801 11.16701,7.49831 2.86285,-2.19708 5.82669,-4.27621 8.50634,-6.70113 z m -47.88945,-0.0984 c 14.96454,-8.40033 17.7311,-17.74453 -1.32825,-20.08874 1.10492,9.26069 -20.46349,32.74485 1.32825,20.08874 z m 85.73877,-27.022 c 16.14247,-1.42431 36.64564,-25.32007 29.66715,-35.67531 -10.54155,12.64576 -29.10702,15.2516 -40.72243,24.43895 -13.17231,18.78332 -4.75445,12.26945 11.05528,11.23636 z m 1.95211,-31.07177 c 9.01643,-7.21705 28.81794,-17.31295 5.3186,-18.88545 -9.02178,-0.5952 -52.96631,-14.22994 -34.80534,4.37348 19.18239,-2.3648 6.46284,28.73453 29.48674,14.51197 z M 457.73683,280.75 c -0.85103,-19.26781 -7.31185,-44.98001 -21.82138,-55.26124 -10.33423,13.00816 -14.02143,22.19685 1.97707,33.06643 14.381,9.45944 3.83145,31.01225 19.65751,33.39426 0.8584,-3.69416 0.18979,-7.47293 0.1868,-11.19945 z m -37.31866,-49.05383 c 10.116,-13.88077 2.42961,-12.42273 -6.04673,-2.76197 -4.79235,-12.34261 -20.83478,-8.49598 -4.43036,-0.40707 3.15539,2.05198 7.19315,10.40117 10.47709,3.16904 z m -86.8323,-18.16583 c 19.82387,-5.38662 -6.65761,-11.21041 -13.37886,-5.53034 -3.81525,-5.71875 -9.36226,-24.48115 -24.45432,-23.09096 -6.26612,21.96706 19.44743,35.41552 37.83318,28.6213 z m 111.77884,-76.40822 c 8.26707,-13.48435 2.74103,-16.46249 -8.4046,-5.81929 -10.52437,1.60936 8.8186,18.4934 8.4046,5.81929 z m -257.5624,265.81691 c -4.58019,-12.50953 17.25588,-10.55458 3.11806,-0.005 -1.34823,6.95773 -7.15162,7.09153 -3.11806,0.005 z M 194,407.51893 c 3.33745,-16.30731 9.4198,-9.43748 12.13443,-8.15549 12.88276,-18.04319 1.17165,23.19281 2.7614,1.13656 -12.75017,18.02843 -2.27866,-9.74476 -14.89583,7.01893 z";  


const svgWidth  = 600;   // width from <svg> or viewBox
const svgHeight = 486;   // height from <svg> or viewBox

const maxSize = radius * 2;

// Compute scale so SVG fits inside ornament
const scale = Math.min(
    maxSize / svgWidth,
    maxSize / svgHeight
);

ctx.scale(scale, scale);           // scale SVG to fit circle
ctx.translate(-svgWidth/2+20, -svgHeight/2);  // center SVG inside canvas

// fill background
ctx.fillStyle = '#ffffff';  // orange
ctx.fill();

// Draw path
const p1 = new Path2D(svgPathData1);
const p2 = new Path2D(svgPathData2);

// Draw fill first
ctx.fillStyle = '#f1582c';  // orange
ctx.fill(p1);

ctx.fillStyle = "#5a0929"; // maroon color 
ctx.fill(p2);

// Use code below if you just want the outline without the fill
//.lineWidth = 2 / scale;   // keep line width uniform
//ctx.strokeStyle = "5a0929";
//ctx.stroke(p2);`,




            };
            
            // ============================================================
            // END EXAMPLES SECTION
            // ============================================================
            
            // Get example names for buttons
            const exampleNames = Object.keys(examples);
            
            // Default code
            editor.setValue(examples[exampleNames[0]]);
            
            // Draw ornament frame
            function drawOrnamentFrame() {
                ornamentCtx.clearRect(0, 0, ornamentCanvas.width, ornamentCanvas.height);
                
                // Draw the main circle
                ornamentCtx.beginPath();
                ornamentCtx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
                
                // Draw ornament cap
                const capWidth = 83.33;
                const capHeight = 41.67;
                const capX = centerX - capWidth / 2;
                const capY = centerY - radius - capHeight;
                
                ornamentCtx.beginPath();
                ornamentCtx.rect(capX, capY, capWidth, capHeight);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
                ornamentCtx.fillStyle = '#000000';
                ornamentCtx.fill();
                
                // Draw hook circle
                const hookRadius = 25;
                const hookY = capY - hookRadius;
                ornamentCtx.beginPath();
                ornamentCtx.arc(centerX, hookY, hookRadius, 0, Math.PI * 2);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
            }
            
            // Draw background content
            function drawBackground() {
                bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
                
                // Fill entire canvas with white first
                bgCtx.fillStyle = '#f5f5f5';
                bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
                
                // Set clipping region to circle
                bgCtx.save();
                bgCtx.beginPath();
                bgCtx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                bgCtx.clip();
                
                // Translate origin to center of ornament (0,0 is now the center!)
                bgCtx.translate(centerX, centerY);
                
                const ctx = bgCtx;
                try {
                    eval(editor.getValue());
                } catch (e) {
                    console.error('Error in user code:', e);
                    alert('Error in code: ' + e.message);
                }
                
                bgCtx.restore();
            }
            
            // Initial draw
            drawBackground();
            drawOrnamentFrame();
            
            // Update button handler
            updateBtn.addEventListener('click', () => {
                drawBackground();
            });
            
            // Example button handlers
            document.querySelectorAll('.example-btn').forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    const exampleName = exampleNames[index];
                    editor.setValue(examples[exampleName]);
                    drawBackground();
                });
            });
            
            // Allow Ctrl+Enter to update
            editor.setOption('extraKeys', {
                'Ctrl-Enter': function() {
                    drawBackground();
                }
            });
            
            // Instructions modal handlers
            document.getElementById('instructions-btn').addEventListener('click', () => {
                document.getElementById('instructions-modal').style.display = 'flex';
            });
            
            document.getElementById('close-instructions').addEventListener('click', () => {
                document.getElementById('instructions-modal').style.display = 'none';
            });
            
            // Close modal when clicking outside content
            document.getElementById('instructions-modal').addEventListener('click', (e) => {
                if (e.target.id === 'instructions-modal') {
                    document.getElementById('instructions-modal').style.display = 'none';
                }
            });
            
            // Download code button handler
            document.getElementById('download-code-btn').addEventListener('click', () => {
                const code = editor.getValue();
                const blob = new Blob([code], { type: 'text/javascript' });
                const link = document.createElement('a');
                link.download = 'ornament-code.js';
                link.href = URL.createObjectURL(blob);
                link.click();
                URL.revokeObjectURL(link.href);
            });
            
            // Download image button handler
            document.getElementById('download-btn').addEventListener('click', () => {
                // Create a temporary canvas to combine both layers
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = bgCanvas.width;
                tempCanvas.height = bgCanvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                
                // Draw white background first
                tempCtx.fillStyle = '#ffffff';
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                
                // Draw the background layer
                tempCtx.drawImage(bgCanvas, 0, 0);
                
                // Draw the ornament layer
                tempCtx.drawImage(ornamentCanvas, 0, 0);
                
                // Download
                const link = document.createElement('a');
                link.download = 'ornament.png';
                link.href = tempCanvas.toDataURL();
                link.click();
            });
            
            // Print image button handler
            document.getElementById('print-btn').addEventListener('click', () => {
                // Create a temporary canvas to combine both layers
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = bgCanvas.width;
                tempCanvas.height = bgCanvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                
                // Draw white background first
                tempCtx.fillStyle = '#ffffff';
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                
                // Draw the background layer
                tempCtx.drawImage(bgCanvas, 0, 0);
                
                // Draw the ornament layer
                tempCtx.drawImage(ornamentCanvas, 0, 0);
                
                // Open print dialog with the image
                const printWindow = window.open('', '_blank');
                printWindow.document.write('<html><head><title>Print Ornament</title></head><body style="margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;">');
                printWindow.document.write('<img src="' + tempCanvas.toDataURL() + '" style="max-width:100%;height:auto;"/>');
                printWindow.document.write('</body></html>');
                printWindow.document.close();
                printWindow.focus();
                setTimeout(() => printWindow.print(), 250);
            });
        });
    </script>
</body>
</html>
