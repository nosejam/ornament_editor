<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ornament Designer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            background-color: #f5f5f5;
            font-family: monospace;
        }
        #editor-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }
        #code-editor {
            height: 75vh;
            width: 100%;
            border: 2px solid #333;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .CodeMirror {
            height: 100%;
            font-size: 14px;
            border-radius: 5px;
        }
        #update-btn {
            margin-top: 10px;
            padding: 12px 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
        }
        #update-btn:hover {
            background-color: #45a049;
        }
        #examples-section {
            margin-top: 20px;
        }
        #examples-section h3 {
            margin-bottom: 10px;
        }
        .example-btn {
            margin: 5px 5px 5px 0;
            padding: 10px 20px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
        }
        .example-btn:hover {
            background-color: #0b7dda;
        }
        #canvas-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }
        #canvas-container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }
        #background-canvas {
            display: block;
            max-width: 90vw;
            max-height: 70vh;
            width: auto;
            height: auto;
        }
        #ornament-canvas {
            position: absolute;
            top: 0;
            left: 0;
            max-width: 90vw;
            max-height: 70vh;
            width: auto;
            height: auto;
        }
        #action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
            margin-top: 20px;
        }
        .action-btn {
            padding: 10px 20px;
            background-color: #ff9800;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
        }
        .action-btn:hover {
            background-color: #e68900;
        }
        #instructions-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #9C27B0;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            z-index: 100;
        }
        #instructions-btn:hover {
            background-color: #7B1FA2;
        }
        #instructions-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        #instructions-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        #instructions-content h2 {
            margin-top: 0;
            color: #333;
        }
        #instructions-content h3 {
            color: #555;
            margin-top: 20px;
        }
        #instructions-content code {
            background-color: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        #instructions-content pre {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        #close-instructions {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: #999;
            cursor: pointer;
            border: none;
            background: none;
        }
        #close-instructions:hover {
            color: #333;
        }
        .coord-info {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        /* Mobile responsive layout */
        @media (max-width: 1000px) {
            body {
                flex-direction: column;
            }
            #editor-panel {
                width: 100%;
            }
            #canvas-panel {
                width: 100%;
                padding-bottom: 20px;
            }
            #canvas-container {
                margin: 20px auto;
            }
            #action-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <button id="instructions-btn">Instructions</button>
    
    <div id="instructions-modal">
        <div id="instructions-content">
            <button id="close-instructions">&times;</button>
            <h2>üé® Ornament Drawing Instructions</h2>
            
            <div class="coord-info">
                <h3>üìç Coordinate System</h3>
                <ul>
                    <li><strong>Center:</strong> (0, 0) is the center of the ornament</li>
                    <li><strong>Horizontal:</strong> Negative is LEFT, Positive is RIGHT</li>
                    <li><strong>Vertical:</strong> Negative is UP, Positive is DOWN</li>
                    <li><strong>Circle size:</strong> Radius is <code>242</code> pixels (diameter is <code>484</code> pixels)</li>
                </ul>
            </div>
            
            <h3>üéØ Drawing Commands</h3>
            
            <h4>Drawing Circles (arc)</h4>
            <pre><code>ctx.beginPath();
ctx.arc(x, y, radius, startAngle, endAngle);
ctx.fill();  // or ctx.stroke();</code></pre>
            <p><strong>Example:</strong> Circle at center with radius 50</p>
            <pre><code>ctx.beginPath();
ctx.arc(0, 0, 50, 0, Math.PI * 2);
ctx.fillStyle = '#ff0000';
ctx.fill();</code></pre>
            
            <h4>Drawing Rectangles (rect)</h4>
            <pre><code>ctx.beginPath();
ctx.rect(x, y, width, height);
ctx.fill();  // or ctx.stroke();</code></pre>
            <p><strong>Example:</strong> 100x100 rectangle centered at origin</p>
            <pre><code>ctx.beginPath();
ctx.rect(-50, -50, 100, 100);
ctx.fillStyle = '#00ff00';
ctx.fill();</code></pre>
            
            <h4>Drawing Lines (moveTo & lineTo)</h4>
            <pre><code>ctx.beginPath();
ctx.moveTo(x1, y1);  // Move to starting point
ctx.lineTo(x2, y2);  // Draw line to this point
ctx.lineTo(x3, y3);  // Continue drawing
ctx.stroke();</code></pre>
            <p><strong>Example:</strong> Draw a triangle</p>
            <pre><code>ctx.beginPath();
ctx.moveTo(0, -50);
ctx.lineTo(-50, 50);
ctx.lineTo(50, 50);
ctx.closePath();
ctx.fillStyle = '#0000ff';
ctx.fill();</code></pre>
            
            <h4>Colors</h4>
            <pre><code>ctx.fillStyle = '#ff0000';   // Red fill
ctx.strokeStyle = '#0000ff'; // Blue outline
ctx.lineWidth = 5;           // Line thickness</code></pre>
            
            <h4>Gradients</h4>
            <pre><code>// Linear gradient
const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
gradient.addColorStop(0, '#ff0000');
gradient.addColorStop(1, '#0000ff');
ctx.fillStyle = gradient;

// Radial gradient
const gradient = ctx.createRadialGradient(x1, y1, r1, x2, y2, r2);
gradient.addColorStop(0, '#ffffff');
gradient.addColorStop(1, '#000000');
ctx.fillStyle = gradient;</code></pre>
            
            <h3>üí° Tips</h3>
            <ul>
                <li>Always use <code>ctx.beginPath()</code> before starting a new shape</li>
                <li>Use <code>ctx.fill()</code> to fill a shape with color</li>
                <li>Use <code>ctx.stroke()</code> to draw just the outline</li>
                <li>Set colors BEFORE calling fill() or stroke()</li>
                <li>Angles are in radians: <code>Math.PI * 2</code> = full circle, <code>Math.PI</code> = half circle</li>
                <li>Press <strong>Ctrl+Enter</strong> to quickly update your ornament</li>
            </ul>
        </div>
    </div>
    
    <div id="editor-panel">
        <h2>Edit Ornament Design</h2>
        <div id="code-editor"></div>
        <button id="update-btn">Update Ornament</button>
        
        <div id="examples-section">
            <h3>Load Example:</h3>
            <button class="example-btn" data-example="smiley">Smiley Face</button>
            <button class="example-btn" data-example="star">Star</button>
            <button class="example-btn" data-example="snowman">Snowman</button>
            <button class="example-btn" data-example="gradient">Red Gradient</button>
            <button class="example-btn" data-example="star-gradient">Star Gradient</button>
            <button class="example-btn" data-example="wildcat-svg">Wildcat SVG</button>
            
        </div>
    </div>
    
    <div id="canvas-panel">
        <div id="canvas-container">
            <canvas id="background-canvas"></canvas>
            <canvas id="ornament-canvas"></canvas>
        </div>
        <div id="action-buttons">
            <button class="action-btn" id="download-code-btn">Download Code</button>
            <button class="action-btn" id="download-btn">Download Image</button>
            <button class="action-btn" id="print-btn">Print Image</button>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script>
        window.addEventListener('load', function() {
            const bgCanvas = document.getElementById('background-canvas');
            const bgCtx = bgCanvas.getContext('2d');
            const ornamentCanvas = document.getElementById('ornament-canvas');
            const ornamentCtx = ornamentCanvas.getContext('2d');
            const updateBtn = document.getElementById('update-btn');
            
            // Initialize CodeMirror editor
            const editor = CodeMirror(document.getElementById('code-editor'), {
                mode: 'javascript',
                theme: 'monokai',
                lineNumbers: true,
                lineWrapping: true,
                indentUnit: 4,
                tabSize: 4,
                indentWithTabs: false,
                matchBrackets: true,
                autoCloseBrackets: true
            });
            
            // Set canvas size to fixed 500px (will be scaled with CSS)
            const circleSize = 500;
            bgCanvas.width = circleSize;
            bgCanvas.height = 1.5 * circleSize;
            ornamentCanvas.width = circleSize;
            ornamentCanvas.height = 1.5 * circleSize;
            
            const centerX = circleSize / 2;
            const centerY = circleSize * 0.75;
            const radius = circleSize / 2 - 8;
            
            // ============================================================
            // EXAMPLES SECTION - Easy to add/remove/edit examples
            // ============================================================
            // Note: Coordinates are relative to center (0,0)
            // Positive X is right, Positive Y is down
            // radius = 242 (size of the ornament circle)
            
            const examples = {
                'Smiley Face': `// Draw yellow background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#ffff00';
ctx.fill();

// Left eye
ctx.beginPath();
ctx.arc(-70, -60, 10, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Right eye
ctx.beginPath();
ctx.arc(70, -60, 10, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Smile
ctx.beginPath();
ctx.arc(0, -20, 170, Math.PI/6, 5*Math.PI/6);
ctx.strokeStyle = '#000000';
ctx.lineWidth = 8;
ctx.stroke();`,

                'Star': `// Draw dark blue background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#000080';
ctx.fill();

// Draw yellow five-pointed star
ctx.beginPath();
const starRadius = 125;
for (let i = 0; i < 5; i++) {
    const angle = (i * 4 * Math.PI) / 5 - Math.PI / 2;
    const x = Math.cos(angle) * starRadius;
    const y = Math.sin(angle) * starRadius;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
}
ctx.closePath();
ctx.fillStyle = '#ffff00';
ctx.fill();`,

                'Snowman': `// Draw light blue background
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = '#87ceeb';
ctx.fill();

// Ground
ctx.beginPath();
ctx.rect(-300, 50, 600, 300);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Bottom circle (largest)
ctx.beginPath();
ctx.arc(0, 75, 60, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Middle circle
ctx.beginPath();
ctx.arc(0, -25, 50, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Top circle (head)
ctx.beginPath();
ctx.arc(0, -105, 40, 0, Math.PI * 2);
ctx.fillStyle = '#ffffff';
ctx.fill();
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Eyes
ctx.beginPath();
ctx.arc(-15, -115, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(15, -115, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

// Smile
ctx.beginPath();
ctx.arc(0, -100, 20, 0, Math.PI);
ctx.strokeStyle = '#000000';
ctx.lineWidth = 2;
ctx.stroke();

// Buttons on middle circle
ctx.beginPath();
ctx.arc(0, -41.67, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(0, -25, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();

ctx.beginPath();
ctx.arc(0, -8.33, 3, 0, Math.PI * 2);
ctx.fillStyle = '#000000';
ctx.fill();`,

                'Red Gradient': `// Create radial gradient from top-right to center
const gradient = ctx.createRadialGradient(
    100, -100, 20,   // Start: top-right, small radius
    0, 0, 300        // End: center, large radius
);

// Add color stops
gradient.addColorStop(0, '#ffffff');  // White at top-right
gradient.addColorStop(1, '#8b0000');  // Dark red at edges

// Fill the ornament circle with gradient
ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();`,
                'Star Gradient': `// Draw dark blue ornament background
const gradient = ctx.createRadialGradient(
    100, - 100, 20,
    0, 0, 300
);
gradient.addColorStop(0, '#ffffff');
gradient.addColorStop(.5, '#000080');

ctx.beginPath();
ctx.arc(0, 0, radius, 0, Math.PI * 2);
ctx.fillStyle = gradient;
ctx.fill();

// Create gradient for star
const gradient2 = ctx.createRadialGradient(
    100, -100, 20,    // Start (relative to star center)
    0, 0, 300       // End (also relative)
);

gradient2.addColorStop(0,   "#ffffff"); // central sparkle
gradient2.addColorStop(0.1,"#fff2b0"); // light highlight
gradient2.addColorStop(0.25,"#ffd45e"); // bright gold
gradient2.addColorStop(.4,   "#8a5c00"); // dark reflective shadow

ctx.beginPath();
const starRadius = 125;
for (let i = 0; i < 5; i++) {
    const angle = (i * 4 * Math.PI) / 5 - Math.PI / 2;
    ctx.lineTo(Math.cos(angle) * starRadius, Math.sin(angle) * starRadius);
}
ctx.closePath();

ctx.fillStyle = gradient2;
ctx.fill();

ctx.restore();`,

                'Wildcat SVG': `// This example draws a complicated SVG path.  An SVG path can be extracted from a
// .svg file downloaded from the internet.  You can generate your own svg from a .jpg 
// or .png using an application like inkscape and the "path - trace bitmap" tool.

// Paste your SVG path here
const svgPathData = "m 269.5,469.36886 c -5.23303,-0.49359 -23.47911,-3.33555 -25.84396,-4.02539 -1.71056,-0.49897 -1.66866,-0.72981 0.57907,-3.19068 1.33266,-1.45903 3.35514,-3.99082 4.49441,-5.62619 l 2.07139,-2.9734 -12.65046,-6.13592 C 219.48841,438.36554 187.16163,413.04696 197.27616,415.40423 204.18764,417.015 229,415.85095 229,413.91593 229,409.40651 205.78263,377.82547 195.03328,367.71325 152.30252,327.51521 97.156025,320.64498 55.739697,350.35983 l -7.580159,5.43851 -2.039282,-4.74044 C 32.095978,318.45759 34.093074,253.99296 50.475678,210.46839 51.864055,206.77981 53,203.59702 53,203.39553 c 0,-0.59576 -9.524643,3.33572 -15.998221,6.60357 -6.827411,3.44647 -6.87669,3.37098 -3.556964,-5.44872 11.167479,-29.66926 35.224956,-61.8733 59.80517,-80.05696 8.614455,-6.3727 8.828845,-6.06173 -5.220583,-7.5723 C 73.894386,115.40136 73.837311,116.1128 89,104.82259 110.64657,88.704449 156.97185,70 175.24505,70 c 0.99723,0 2.58757,-3.102373 4.71842,-9.204487 C 185.29119,45.538512 196.34156,26 199.64274,26 c 6.78285,0 36.44378,19.146463 54.56679,35.223483 l 6.45187,5.723483 17.4193,1.564388 c 48.88643,4.390381 96.69739,20.356625 124.8007,41.676606 2.11655,1.60567 3.78483,1.73762 15,1.1864 15.40815,-0.75731 40.01835,2.19205 42.97676,5.15046 0.78002,0.78003 -3.04638,18.67624 -5.98058,27.97134 -3.59072,11.37487 -3.7964,9.73112 2.56473,20.49596 13.69866,23.18201 13.76342,42.27948 0.16856,49.7105 -1.79608,0.98174 -1.741,1.24845 1.1182,5.41499 5.96529,8.69285 11.21889,20.84434 15.77489,36.48708 0.22001,0.75537 1.85134,0.85017 5.15889,0.29979 22.20371,-3.69467 44.72302,-1.91883 26.33715,2.07692 -13.96285,3.0345 -28.26679,7.08515 -27.55017,7.80176 0.25808,0.25809 5.32495,0.66268 11.25971,0.8991 13.55092,0.53981 28.29871,2.66068 38.72953,5.56967 L 536.5,275.5 524,275.70851 c -14.52018,0.24221 -43.05174,2.20543 -44.42988,3.05717 -0.51901,0.32077 3.77662,1.378 9.54585,2.34941 11.13897,1.87555 26.78317,6.50051 33.34547,9.85807 4.73533,2.42279 5.02613,2.40244 -7.48319,0.52357 -16.05773,-2.41183 -36.29142,-3.60159 -37.19093,-2.18685 -0.41618,0.65457 -0.76619,3.21512 -0.7778,5.69012 -0.0252,5.36508 -1.31557,13.8099 -3.63789,23.80749 l -1.69744,7.30749 -5.77604,-5.71577 -5.77604,-5.71577 -6.31106,6.5058 c -8.19217,8.44497 -18.85404,15.08824 -30.10332,18.75699 -3.46093,1.12871 -4.20362,2.07789 -8.5,10.86311 -7.97708,16.31148 -18.2811,24.4923 -35.27479,28.00622 l -7.76365,1.60535 -2.29206,6.73247 -2.29206,6.73248 2.59115,2.03819 c 5.20548,4.09464 4.20973,12.63013 -3.25809,27.92805 -14.7727,30.26207 -55.8196,49.44043 -97.41823,45.51676 z m 37.47263,-19.37659 c 16.10853,-4.57579 31.33826,-15.21702 39.21055,-27.39698 5.54531,-8.57967 5.84588,-8.32417 -9.93318,-8.44359 -49.42964,-0.37408 -79.2277,-20.10669 -86.8625,-57.52133 -0.80026,-3.9217 -1.56705,-7.51203 -1.70397,-7.97849 -0.13692,-0.46647 -2.59673,1.26273 -5.46624,3.84266 L 237,357.18534 v -5.91117 c 0,-10.75826 5.49179,-23.94371 14.12932,-33.92358 4.95878,-5.72943 4.13593,-6.56487 -6.63465,-6.73613 -8.40457,-0.13364 -8.40545,-0.57402 -0.0148,-7.36783 10.04482,-8.1332 25.30233,-13.55384 42.65766,-15.15529 13.45214,-1.24129 12.8506,-1.45235 16.83986,5.90866 18.07472,33.35168 67.69626,40.67104 82.4398,12.16018 l 1.63111,-3.15423 -4.9543,-5.00672 c -9.10407,-9.20038 -17.77539,-24.15628 -19.76055,-34.08209 -1.12033,-5.60163 46.13185,-3.61181 61.91657,2.60734 8.68111,3.42034 -24.85551,-29.38325 -43.78214,-42.82517 l -5.03213,-3.57388 -4.46787,2.01162 c -12.99756,5.85204 -48.37071,11.5562 -40.14766,6.47407 0.56855,-0.35138 2.42044,-2.38975 4.11532,-4.5297 l 3.08159,-3.89083 -4.75855,1.55144 c -33.82341,11.02753 -72.84859,-20.09566 -60.39921,-48.1693 2.55735,-5.76687 2.9206,-5.36669 -8.31278,-9.15787 -6.441,-2.1738 -10.64052,-2.83531 -21.04657,-3.31526 l -13,-0.5996 6.23727,-4.16541 c 19.00807,-12.69406 62.73937,-8.67565 80.51886,7.39877 2.59365,2.34491 3.14597,0.95762 1.97267,-4.95484 -0.57612,-2.90319 -0.88536,-5.44394 -0.68721,-5.64613 0.8507,-0.86798 13.49091,12.30899 22.51982,23.47611 22.88999,28.31076 42.30765,31.93268 49.96298,9.31945 l 1.76268,-5.20682 2.56758,3.88943 c 3.39955,5.14976 5.7088,11.91387 5.81134,17.02224 l 0.0832,4.1468 5.87854,1.24751 c 14.89864,3.16171 34.51515,-5.07609 36.86155,-15.4797 4.12408,-18.28567 -35.64484,-58.23158 -81.99873,-82.36365 -14.43885,-7.51695 -18.60828,-8.69905 -9.49058,-2.69075 12.53516,8.26031 31.5,25.65904 31.5,28.89874 0,0.37187 -3.2625,-1.15967 -7.25,-3.40343 -29.57122,-16.63965 -66.20939,-32.384468 -91.45428,-39.301385 l -9.20428,-2.521907 -3.97609,8.167486 c -6.01091,12.347306 -23.12097,35.995196 -24.81679,34.299386 -0.22855,-0.22855 -2.1366,-5.38694 -4.24012,-11.46308 -7.78867,-22.49809 -21.50678,-47.065803 -34.43654,-61.67227 -6.82289,-7.70768 -6.68662,-7.762122 -10.02094,4.00345 -6.74526,23.801524 -8.03997,60.1086 -1.69385,47.5 6.83045,-13.570866 9.37592,-15.688534 11.11867,-9.25 3.62627,13.39717 8.92313,25.18043 8.99047,20 0.009,-0.6875 1.98003,-4.80789 4.38021,-9.15642 l 4.36397,-7.90643 3.50818,7.40643 c 3.63704,7.67848 7.73139,19.80054 7.73139,22.89018 0,5.43953 -62.57911,9.77046 -67.66655,4.68302 -1.57614,-1.57613 0.30922,-43.045457 2.26531,-49.826653 0.86979,-3.015307 -22.95057,3.523953 -38.01586,10.436263 l -6.91711,3.17373 11.22162,1.25107 c 6.17188,0.68809 13.09448,1.75539 15.38355,2.37177 l 4.16195,1.1207 -10.96646,5.67208 c -22.87621,11.83206 -69.280259,45.86043 -69.494768,50.96093 -0.01557,0.37033 -2.062946,2.86346 -4.549715,5.54028 -5.712626,6.14922 -5.507033,6.25938 3.590793,1.92406 7.711017,-3.67448 18.065262,-7.54632 18.641007,-6.97058 0.179088,0.17909 -2.585661,5.21966 -6.143885,11.20126 -16.244179,27.3075 -27.836352,65.523 -27.437457,90.45208 0.07099,4.43652 0.127626,4.3542 2.857503,-4.15323 10.429329,-32.50214 29.682552,-60.09237 56.049252,-80.31962 6.15911,-4.72497 6.38141,-4.81228 4.5,-1.76729 -1.08855,1.76177 -4.97422,8.05493 -8.63482,13.9848 -22.180401,35.93034 -35.018892,74.14526 -35.257765,104.9479 -0.104942,13.53211 -0.667267,12.92335 10.110374,10.94527 11.054551,-2.0289 30.632581,-2.08888 40.895411,-0.12528 4.27257,0.81748 7.89616,1.35847 8.05243,1.2022 0.61446,-0.61446 -6.81014,-13.99772 -10.64628,-19.1905 -4.7959,-6.49198 -4.50441,-6.57441 6.80808,-1.92522 16.00205,6.57651 32.45196,16.19577 48.69339,28.47399 25.21611,19.06291 50.48852,55.80779 59.97666,87.20321 l 2.64437,8.75 h 4.36713 c 2.40191,0 7.8195,-0.48018 12.03908,-1.06707 4.21957,-0.58689 7.87643,-0.8626 8.12634,-0.61268 1.56431,1.56431 -18.48154,12.24819 -27.47751,14.64475 -10.64463,2.83576 7.74246,10.743 27.63763,11.88537 l 11.31369,0.64963 -4.06369,5.79441 c -2.23504,3.18692 -4.0637,6.06563 -4.0637,6.39714 0,1.40108 23.85728,-0.67809 30.97263,-2.69928 z M 294,284.39643 C 240.57561,266.1337 189.56162,260.06045 144,266.53882 c -7.92274,1.12653 1.72563,-1.69446 16.46014,-4.81262 35.80772,-7.57773 86.83618,-3.95201 134.02961,9.5232 l 14.98975,4.28004 0.71116,4.97161 c 0.39114,2.73439 0.96682,5.99027 1.2793,7.23528 0.73408,2.92482 1.01157,2.97787 -17.46996,-3.3399 z m 12.95603,-16.89151 C 278.763,252.51175 188.88271,235.76496 144.28921,237.1963 c -6.71593,0.21557 -12.11092,0.29208 -11.98887,0.17003 5.03371,-5.03371 71.09935,-6.59256 103.19966,-2.43504 29.8413,3.86494 80.28782,15.71238 79.06577,18.56871 -0.23531,0.55 -1.18637,3.475 -2.11346,6.5 -2.88725,9.42082 -2.60874,9.04053 -5.49628,7.50492 z M 313,243.5603 c -30.72869,-16.71182 -88.83843,-29.80288 -143,-32.21527 -24.91699,-1.10983 -12.62781,-2.61671 21.5,-2.63631 33.6581,-0.0193 51.55965,2.16475 85.08978,10.38135 14.89878,3.65097 45.76962,13.5327 48.19864,15.42835 0.15863,0.12379 -1.14614,2.5328 -2.89948,5.35333 -3.33103,5.35851 -4.74185,5.94394 -8.88894,3.68855 z m 16,152.08892 c 0,-7.91565 -2.59842,-9.88117 -7.13779,-5.39922 -2.99593,2.95803 -3.32231,3.07033 -3.63301,1.25 -1.2913,-7.56521 -2.81581,-8.5847 -6.7292,-4.5 -3.75071,3.9149 -4.19093,3.80545 -5.02746,-1.25 -0.9972,-6.02647 -1.20006,-6.13387 -5.36096,-2.83837 -2.05669,1.62893 -4.94817,3.51243 -6.42551,4.18555 -5.96756,2.719 7.01767,7.64518 25.94437,9.84245 3.77826,0.43864 7.20706,0.85666 7.61956,0.92894 0.4125,0.0723 0.75,-0.92642 0.75,-2.21935 z m 20.87493,1.68783 c 2.68757,-0.71933 2.73472,-9.86775 0.0803,-15.58705 -1.63971,-3.53303 -2.23666,-3.46155 -4.17521,0.5 -0.8747,1.7875 -3.88122,6.0625 -6.68115,9.5 l -5.09079,6.25 6.74594,-0.0136 c 3.71027,-0.008 7.81466,-0.2997 9.12087,-0.6493 z M 290.0334,383.25 c 1.47962,-4.9215 2.50795,-18.63402 1.35645,-18.08779 -4.1134,1.95121 -16.95926,8.23633 -17.21975,8.42515 -1.41309,1.02422 11.48494,13.33716 14.0329,13.39632 0.38664,0.009 1.21033,-1.67118 1.8304,-3.73368 z m 29.51713,-14.90468 C 318.99452,366.12997 318.51961,366 310.98095,366 c -9.48809,0 -9.29083,0.68961 -3.57548,-12.5 l 4.33323,-10 -1.79626,-3.5669 c -2.85385,-5.66698 -4.68904,-6.7399 -6.67604,-3.90305 -4.84372,6.91538 -5.50027,6.91481 -6.91199,-0.006 -3.01015,-14.75695 -20.52019,-25.18777 -26.17981,-15.59544 -6.90517,11.7034 -7.19771,44.57369 -0.39667,44.57057 2.57881,-0.001 13.35958,-5.33898 20.29376,-10.04789 3.88625,-2.63911 6.4707,-3.80893 7.07651,-3.20312 1.31661,1.31661 3.82549,11.06483 3.83993,14.92001 0.0202,5.40513 0.80846,6.51118 3.42046,4.79973 2.07138,-1.35722 2.37879,-1.2468 4.49403,1.61422 2.21626,2.99765 2.31873,3.0275 4.2849,1.24814 1.96045,-1.77419 2.07182,-1.75472 4.16341,0.72792 l 2.14907,2.55087 0.31959,-3.45922 c 0.17577,-1.90257 0.0547,-4.51462 -0.26906,-5.80455 z m 66.73159,-3.69839 c 4.46214,-1.87627 11.40801,-9.10192 14.37182,-14.95072 3.03924,-5.99765 3.38877,-5.69647 -5.804,-5.00122 l -7.60334,0.57504 -0.58532,4.94216 c -0.32193,2.71819 -1.70252,7.38243 -3.06798,10.36499 -2.64443,5.77618 -2.36723,6.19574 2.68882,4.06975 z m -14.53036,-8.44611 C 374.96962,353.78538 381,346.35335 381,344.803 381,344.36135 379.23308,344 377.07351,344 c -2.15957,0 -8.49265,-0.9 -14.07351,-2 -13.74797,-2.70976 -16.97515,-2.66253 -17.08438,0.25 -0.0464,1.2375 -0.40763,4.8375 -0.8027,8 -0.83603,6.69238 -0.91987,6.64762 5.1913,2.77202 L 355,350.04405 v 3.97797 c 0,4.76663 0.033,4.77233 5.65511,0.97798 5.55616,-3.74981 5.34489,-3.79167 5.34489,1.05902 0,4.41723 0.0542,4.41857 5.75176,0.1418 z m -46.99433,-1.76723 C 333.36573,350.14389 343.46275,338 338.42111,338 c -0.80347,0 -4.11065,-1.07671 -7.34929,-2.39269 l -5.88843,-2.39268 -1.13651,4.51348 c -0.9003,3.57539 -4.39527,11.84492 -7.82796,18.52189 -0.8132,1.58176 3.60567,0.64173 8.53851,-1.81641 z m 88.19986,-28.10403 c 16.25616,-4.48592 27.04769,-14.92378 30.69025,-29.68444 2.04327,-8.27991 1.49092,-8.90638 -3.70989,-4.20776 C 431.37052,300.17725 409.42367,312 403.62305,312 c -0.77324,0 -2.12957,1.80866 -3.01407,4.01924 -0.8845,2.21058 -2.7078,5.76115 -4.05177,7.89014 -3.55161,5.62611 1.8785,6.42743 16.40008,2.42018 z m 1.35048,-30.98552 c 2.70503,-1.37074 5.14615,-3.36383 5.42472,-4.42909 0.27857,-1.06525 1.69022,-2.22376 3.137,-2.57445 C 425.75091,287.64206 433,282.35701 433,280.95471 c 0,-2.27678 -29.34378,-8.44487 -44.75,-9.40649 -11.55661,-0.72134 -11.69915,-0.60606 -6.95329,5.62404 2.84815,3.73891 3.92119,4.40031 7.88652,4.86112 5.68639,0.6608 7.99474,2.40934 7.22573,5.47334 -0.60375,2.40551 1.41208,7.17146 4.22158,9.98097 2.10392,2.10392 6.72403,1.3798 13.67723,-2.14365 z M 457.72323,280.75 c -0.91687,-19.78326 -5.92472,-35.60301 -15.98611,-50.5 -5.06776,-7.50338 -4.7023,-7.44131 -7.52933,-1.27896 -1.25428,2.73407 -3.84383,7.01909 -5.75455,9.52227 l -3.47403,4.55124 6.37781,7.72772 c 15.14479,18.35028 20.93097,29.22783 17.49366,32.88667 -1.97825,2.10576 -2.1082,2.62259 -0.84439,3.35816 0.82154,0.47815 3.06871,1.99784 4.99371,3.3771 5.2665,3.77341 5.33829,3.62681 4.72323,-9.6442 z m -37.39218,-49 c 7.81698,-10.44261 7.16973,-16.1736 -0.80331,-7.11286 l -4.08046,4.63713 -2.73783,-4.13713 c -2.5715,-3.88581 -3.02553,-4.13647 -7.47364,-4.12605 l -4.73581,0.0111 3.5,2.71705 c 1.925,1.49439 5.525,4.62896 8,6.96574 5.42206,5.11924 5.29333,5.10309 8.33105,1.04503 z m -90.52643,-17.20758 c 2.36754,-0.32094 6.3612,-1.55023 8.87479,-2.73176 l 4.57016,-2.14823 -4.72322,-2.40041 c -4.5242,-2.29926 -4.88847,-2.33429 -8.64502,-0.83121 C 327.72434,207.29386 323.98631,208 321.57459,208 h -4.38493 l 0.52386,-5.7773 0.52387,-5.7773 -10.86869,-6.73518 -10.8687,-6.73517 -1.26685,4.26248 c -4.07304,13.70421 12.74081,30.46805 28.26685,28.18279 1.1,-0.1619 3.93708,-0.55696 6.30462,-0.8779 z M 448.59333,129.25 c 2.82557,-7.39065 2.61683,-7.46918 -5.68829,-2.14024 -10.92948,7.01286 -10.7081,6.50622 -5.26008,12.03741 l 4.70815,4.78002 1.92537,-4.21359 c 1.05896,-2.31748 3.00064,-7.0261 4.31485,-10.4636 z M 187.80231,402.93903 c 1.33759,-4.18274 1.38616,-5.20451 0.27995,-5.88819 -2.38693,-1.4752 -0.0749,-3.05084 4.47676,-3.05084 4.823,0 5.86755,1.50712 2.0504,2.9584 -1.77845,0.67617 -2.72307,2.20619 -3.68905,5.97525 -0.9278,3.62007 -1.78919,5.06635 -3.01748,5.06635 -1.6121,0 -1.61836,-0.31476 -0.10058,-5.06097 z M 194,407.51893 c 0,-6.93229 9.1256,-15.60853 10,-9.50758 l 0.5,3.48865 2.86869,-3.75 c 5.03848,-6.58639 6.44775,-5.14891 4.49326,4.58322 -1.35574,6.75071 -4.55817,8.48233 -3.54488,1.91678 l 0.57876,-3.75 -3.19791,3.75004 c -3.98289,4.67055 -4.49649,4.67054 -4.90591,-4e-5 l -0.32871,-3.75 -1.91686,3.75 C 196.98206,407.31042 194,409.45455 194,407.51893 Z";  


const svgWidth  = 600;   // width from <svg> or viewBox
const svgHeight = 486;   // height from <svg> or viewBox

const maxSize = radius * 2;

// Compute scale so SVG fits inside ornament
const scale = Math.min(
    maxSize / svgWidth,
    maxSize / svgHeight
);

ctx.scale(scale, scale);           // scale SVG to fit circle
ctx.translate(-svgWidth/2+20, -svgHeight/2);  // center SVG inside canvas

// fill background
ctx.fillStyle = '#f1582c';  // orange
ctx.fill();

// Draw path
const p = new Path2D(svgPathData);


// Draw fill first
ctx.fillStyle = "#5a0929"; // maroon color 
ctx.fill(p);

// Use code below if you just want the outline without the fill
//.lineWidth = 2 / scale;   // keep line width uniform
//ctx.strokeStyle = "5a0929";
//ctx.stroke(p);`,




            };
            
            // ============================================================
            // END EXAMPLES SECTION
            // ============================================================
            
            // Get example names for buttons
            const exampleNames = Object.keys(examples);
            
            // Default code
            editor.setValue(examples[exampleNames[0]]);
            
            // Draw ornament frame
            function drawOrnamentFrame() {
                ornamentCtx.clearRect(0, 0, ornamentCanvas.width, ornamentCanvas.height);
                
                // Draw the main circle
                ornamentCtx.beginPath();
                ornamentCtx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
                
                // Draw ornament cap
                const capWidth = 83.33;
                const capHeight = 41.67;
                const capX = centerX - capWidth / 2;
                const capY = centerY - radius - capHeight;
                
                ornamentCtx.beginPath();
                ornamentCtx.rect(capX, capY, capWidth, capHeight);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
                ornamentCtx.fillStyle = '#000000';
                ornamentCtx.fill();
                
                // Draw hook circle
                const hookRadius = 25;
                const hookY = capY - hookRadius;
                ornamentCtx.beginPath();
                ornamentCtx.arc(centerX, hookY, hookRadius, 0, Math.PI * 2);
                ornamentCtx.strokeStyle = '#000000';
                ornamentCtx.lineWidth = 8;
                ornamentCtx.stroke();
            }
            
            // Draw background content
            function drawBackground() {
                bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
                
                // Fill entire canvas with white first
                bgCtx.fillStyle = '#f5f5f5';
                bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
                
                // Set clipping region to circle
                bgCtx.save();
                bgCtx.beginPath();
                bgCtx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                bgCtx.clip();
                
                // Translate origin to center of ornament (0,0 is now the center!)
                bgCtx.translate(centerX, centerY);
                
                const ctx = bgCtx;
                try {
                    eval(editor.getValue());
                } catch (e) {
                    console.error('Error in user code:', e);
                    alert('Error in code: ' + e.message);
                }
                
                bgCtx.restore();
            }
            
            // Initial draw
            drawBackground();
            drawOrnamentFrame();
            
            // Update button handler
            updateBtn.addEventListener('click', () => {
                drawBackground();
            });
            
            // Example button handlers
            document.querySelectorAll('.example-btn').forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    const exampleName = exampleNames[index];
                    editor.setValue(examples[exampleName]);
                    drawBackground();
                });
            });
            
            // Allow Ctrl+Enter to update
            editor.setOption('extraKeys', {
                'Ctrl-Enter': function() {
                    drawBackground();
                }
            });
            
            // Instructions modal handlers
            document.getElementById('instructions-btn').addEventListener('click', () => {
                document.getElementById('instructions-modal').style.display = 'flex';
            });
            
            document.getElementById('close-instructions').addEventListener('click', () => {
                document.getElementById('instructions-modal').style.display = 'none';
            });
            
            // Close modal when clicking outside content
            document.getElementById('instructions-modal').addEventListener('click', (e) => {
                if (e.target.id === 'instructions-modal') {
                    document.getElementById('instructions-modal').style.display = 'none';
                }
            });
            
            // Download code button handler
            document.getElementById('download-code-btn').addEventListener('click', () => {
                const code = editor.getValue();
                const blob = new Blob([code], { type: 'text/javascript' });
                const link = document.createElement('a');
                link.download = 'ornament-code.js';
                link.href = URL.createObjectURL(blob);
                link.click();
                URL.revokeObjectURL(link.href);
            });
            
            // Download image button handler
            document.getElementById('download-btn').addEventListener('click', () => {
                // Create a temporary canvas to combine both layers
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = bgCanvas.width;
                tempCanvas.height = bgCanvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                
                // Draw white background first
                tempCtx.fillStyle = '#ffffff';
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                
                // Draw the background layer
                tempCtx.drawImage(bgCanvas, 0, 0);
                
                // Draw the ornament layer
                tempCtx.drawImage(ornamentCanvas, 0, 0);
                
                // Download
                const link = document.createElement('a');
                link.download = 'ornament.png';
                link.href = tempCanvas.toDataURL();
                link.click();
            });
            
            // Print image button handler
            document.getElementById('print-btn').addEventListener('click', () => {
                // Create a temporary canvas to combine both layers
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = bgCanvas.width;
                tempCanvas.height = bgCanvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                
                // Draw white background first
                tempCtx.fillStyle = '#ffffff';
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                
                // Draw the background layer
                tempCtx.drawImage(bgCanvas, 0, 0);
                
                // Draw the ornament layer
                tempCtx.drawImage(ornamentCanvas, 0, 0);
                
                // Open print dialog with the image
                const printWindow = window.open('', '_blank');
                printWindow.document.write('<html><head><title>Print Ornament</title></head><body style="margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;">');
                printWindow.document.write('<img src="' + tempCanvas.toDataURL() + '" style="max-width:100%;height:auto;"/>');
                printWindow.document.write('</body></html>');
                printWindow.document.close();
                printWindow.focus();
                setTimeout(() => printWindow.print(), 250);
            });
        });
    </script>
</body>
</html>
